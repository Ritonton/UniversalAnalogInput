<ContentDialog x:Class="UniversalAnalogInputUI.Dialogs.DependencyErrorDialog"
              xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
              xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
              Title="Setup Required Components"
              PrimaryButtonText="Exit Application"
              SecondaryButtonText="Continue Anyway"
              DefaultButton="Primary"
              CornerRadius="8"
              PrimaryButtonStyle="{StaticResource AccentButtonStyle}"
              SecondaryButtonStyle="{StaticResource DefaultButtonStyle}">

    <Grid MinWidth="420" MaxWidth="520" Padding="24">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <Grid Grid.Row="0" Margin="0,0,0,24">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

            <Border Grid.Column="0"
                    Background="{ThemeResource AccentFillColorDefaultBrush}"
                    CornerRadius="28"
                    Width="56" Height="56"
                    VerticalAlignment="Top"
                    Margin="0,0,16,0">
                <FontIcon Glyph="&#xE896;"
                         FontSize="28"
                         Foreground="White"
                         HorizontalAlignment="Center"
                         VerticalAlignment="Center"/>
            </Border>

            <StackPanel Grid.Column="1" Spacing="6" VerticalAlignment="Center">
                <TextBlock Text="Set up required components"
                          FontSize="20"
                          FontWeight="SemiBold"
                          Foreground="{ThemeResource TextFillColorPrimaryBrush}"/>
                <TextBlock Text="These components are required for analog input capture and gamepad emulation."
                          FontSize="13"
                          Foreground="{ThemeResource TextFillColorSecondaryBrush}"
                          TextWrapping="Wrap"/>
            </StackPanel>
        </Grid>

        <!-- Dependency Status List -->
        <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto">
            <StackPanel Spacing="12">

                <!-- Wooting SDK Status -->
                <Border x:Name="WootingErrorBorder"
                        Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                        CornerRadius="8"
                        Padding="16"
                        BorderThickness="1"
                        BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>

                        <FontIcon Grid.Column="0" Grid.Row="0"
                                 Glyph="&#xE7F8;"
                                 FontSize="20"
                                 Foreground="{ThemeResource TextFillColorTertiaryBrush}"
                                 Margin="0,0,12,0"
                                 VerticalAlignment="Center"/>

                        <StackPanel Grid.Column="1" Grid.Row="0" VerticalAlignment="Center">
                            <TextBlock Text="Wooting Analog SDK"
                                      FontWeight="SemiBold"
                                      FontSize="14"/>
                            <TextBlock x:Name="WootingStatusText"
                                      Text="Status: Not installed"
                                      FontSize="12"/>
                        </StackPanel>

                        <Border Grid.Column="2" Grid.Row="0"
                               x:Name="WootingStatusIcon"
                               Background="{ThemeResource AccentFillColorDefaultBrush}"
                               CornerRadius="12"
                               Width="24" Height="24"
                               VerticalAlignment="Center">
                            <FontIcon x:Name="WootingStatusIconGlyph"
                                     Glyph="&#xE73E;"
                                     FontSize="12"
                                     Foreground="White"
                                     HorizontalAlignment="Center"
                                     VerticalAlignment="Center"/>
                        </Border>

                        <TextBlock Grid.Column="1" Grid.Row="1" Grid.ColumnSpan="2"
                                  x:Name="WootingErrorText"
                                  TextWrapping="Wrap"
                                  FontSize="12"
                                  Margin="0,8,0,0"
                                  Visibility="Collapsed"/>

                        <StackPanel Grid.Column="1" Grid.Row="2" Grid.ColumnSpan="2"
                                   Orientation="Horizontal"
                                   Spacing="8"
                                   Margin="0,12,0,0">
                            <TextBlock Text="Installation:"
                                      FontWeight="SemiBold"
                                      FontSize="12"
                                      VerticalAlignment="Center"
                                      Foreground="{ThemeResource TextFillColorSecondaryBrush}"/>
                            <HyperlinkButton x:Name="WootingDownloadButton"
                                            NavigateUri="https://github.com/WootingKb/wooting-analog-sdk/releases/latest"
                                            Content="Download Wooting Analog SDK"
                                            Padding="0"
                                            FontSize="12"/>
                        </StackPanel>
                    </Grid>
                </Border>

                <!-- ViGEm Bus Driver Status -->
                <Border x:Name="VigemErrorBorder"
                        Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                        CornerRadius="8"
                        Padding="16"
                        BorderThickness="1"
                        BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>

                        <FontIcon Grid.Column="0" Grid.Row="0"
                                 Glyph="&#xE950;"
                                 FontSize="20"
                                 Foreground="{ThemeResource TextFillColorTertiaryBrush}"
                                 Margin="0,0,12,0"
                                 VerticalAlignment="Center"/>

                        <StackPanel Grid.Column="1" Grid.Row="0" VerticalAlignment="Center">
                            <TextBlock Text="ViGEm Bus Driver"
                                      FontWeight="SemiBold"
                                      FontSize="14"/>
                            <TextBlock x:Name="VigemStatusText"
                                      Text="Status: Not installed"
                                      FontSize="12"/>
                        </StackPanel>

                        <Border Grid.Column="2" Grid.Row="0"
                               x:Name="VigemStatusIcon"
                               Background="{ThemeResource AccentFillColorDefaultBrush}"
                               CornerRadius="12"
                               Width="24" Height="24"
                               VerticalAlignment="Center">
                            <FontIcon x:Name="VigemStatusIconGlyph"
                                     Glyph="&#xE73E;"
                                     FontSize="12"
                                     Foreground="White"
                                     HorizontalAlignment="Center"
                                     VerticalAlignment="Center"/>
                        </Border>

                        <TextBlock Grid.Column="1" Grid.Row="1" Grid.ColumnSpan="2"
                                  x:Name="VigemErrorText"
                                  TextWrapping="Wrap"
                                  FontSize="12"
                                  Margin="0,8,0,0"
                                  Visibility="Collapsed"/>

                        <StackPanel Grid.Column="1" Grid.Row="2" Grid.ColumnSpan="2"
                                   Orientation="Horizontal"
                                   Spacing="8"
                                   Margin="0,12,0,0">
                            <TextBlock Text="Installation:"
                                      FontWeight="SemiBold"
                                      FontSize="12"
                                      VerticalAlignment="Center"
                                      Foreground="{ThemeResource TextFillColorSecondaryBrush}"/>
                            <HyperlinkButton x:Name="VigemDownloadButton"
                                            NavigateUri="https://github.com/nefarius/ViGEmBus/releases/latest"
                                            Content="Download ViGEm Bus Driver"
                                            Padding="0"
                                            FontSize="12"/>
                        </StackPanel>
                    </Grid>
                </Border>

            </StackPanel>
        </ScrollViewer>

        <!-- Footer Warning -->
        <Border Grid.Row="2"
                x:Name="WarningBorder"
                CornerRadius="6"
                Padding="16"
                Margin="0,20,0,0">
            <TextBlock TextWrapping="Wrap"
                      FontSize="12">
                <Run Text="Warning:" FontWeight="SemiBold"/>
                <Run Text="The application will run in degraded mode if you continue. Analog input and gamepad emulation features will not work."/>
            </TextBlock>
        </Border>
    </Grid>
</ContentDialog>
